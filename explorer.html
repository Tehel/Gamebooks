<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN"
                      "http://www.w3.org/TR/html4/strict.dtd">
<html>
  <head>
    <title>FileReader Example</title>

    <script type="text/javascript" charset="utf-8" src="phonegap.js"></script>
    <script language='Javascript' src='js/toolbox.js'></script>
    <script type="text/javascript" charset="utf-8">

    // Wait for PhoneGap to load
    //
	
	var rootDir;
	
    function onLoad()
	{
        document.addEventListener("deviceready", devready, false);
    }

	function devready()
	{
		// PhoneGap is ready
		window.requestFileSystem(LocalFileSystem.PERSISTENT, 0, gotFs, fail);
		alert( 'Sent filesystem request' );
	}

	function gotFs( fs )
	{
		alert( 'Got FS: ' + fs.name );
		// Filesystem is available
		rootDir = fs.root;
		alert( 'root name: ' + rootDir.name );
		alert( 'root name: ' + rootDir.fullPath );
	}
	
	function click()
	{
		alert( 'root name: ' + rootDir.name );
		alert( 'root name: ' + rootDir.fullPath );
	}

	// fs.root.getFile("readme.txt", null, gotFileEntry, fail);
	
    function gotFileEntry(fileEntry)
	{
        fileEntry.file(gotFile, fail);
    }

    function gotFile(file)
	{
        readDataUrl(file);
        readAsText(file);
    }

    function readDataUrl(file)
	{
        var reader = new FileReader();
        reader.onloadend = function(evt) {
            trace("Read as data URL");
            trace(evt.target.result);
        };
        reader.readAsDataURL(file);
    }

    function readAsText(file)
	{
        var reader = new FileReader();
        reader.onloadend = function(evt) {
            trace("Read as text");
            trace(evt.target.result);
        };
        reader.readAsText(file);
    }

    function fail(evt) { trace( evt.target.error.code ); }

    </script>
  </head>
  <body onload="onLoad()">
    <h1>Example</h1>
    <p onclick='click()'>Read File</p>
  </body>
</html>
